<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Olist Online Dashboard</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  </head>
  <body>
    <header class="page-header">
      <h1>Olist E-commerce Online Dashboard</h1>
      <p>
        Advanced interactive analytics for Executive, Operations, and Customer
        Satisfaction views
      </p>
      <div class="header-badge">Data scope: Brazil (state-level analytics)</div>
    </header>

    <section class="filter-panel">
      <h2>Global Filters</h2>
      <div class="filter-grid">
        <label class="filter-item">
          <span>Country</span>
          <select id="filter-country">
            <option value="Brazil" selected>Brazil</option>
          </select>
        </label>
        <label class="filter-item">
          <span>Date Granularity</span>
          <select id="filter-grain">
            <option value="day">Daily</option>
            <option value="month" selected>Monthly</option>
            <option value="year">Yearly</option>
          </select>
        </label>
        <label class="filter-item">
          <span>Start Date</span>
          <input id="filter-start-date" type="date" />
        </label>
        <label class="filter-item">
          <span>End Date</span>
          <input id="filter-end-date" type="date" />
        </label>
        <label class="filter-item tall">
          <span>States (multi-select)</span>
          <select id="filter-states" multiple></select>
        </label>
        <label class="filter-item tall">
          <span>Payment Types (multi-select)</span>
          <select id="filter-payments" multiple></select>
        </label>
        <label class="filter-item">
          <span>Category Ranking</span>
          <select id="exec-rank-mode">
            <option value="top" selected>Top</option>
            <option value="bottom">Bottom</option>
          </select>
        </label>
        <label class="filter-item">
          <span>Category N</span>
          <input id="exec-top-n" type="number" min="3" max="30" value="12" />
        </label>
        <label class="filter-item">
          <span>State Ranking</span>
          <select id="ops-rank-mode">
            <option value="top" selected>Top</option>
            <option value="bottom">Bottom</option>
          </select>
        </label>
        <label class="filter-item">
          <span>State N</span>
          <input id="ops-top-n" type="number" min="3" max="30" value="12" />
        </label>
      </div>
      <div class="filter-actions">
        <button id="apply-filters-btn" class="primary-btn">Apply Filters</button>
        <button id="reset-filters-btn" class="secondary-btn">Reset to Default</button>
        <div id="filter-summary" class="filter-summary">Loading filters...</div>
      </div>
      <div class="storyline-panel">
        <span class="storyline-label">Storyline shortcuts:</span>
        <button id="story-exec-btn" class="secondary-btn">1) Growth Overview</button>
        <button id="story-ops-btn" class="secondary-btn">2) Supply Chain Bottleneck</button>
        <button id="story-csat-btn" class="secondary-btn">3) Delay to CSAT Impact</button>
        <button id="story-reset-btn" class="secondary-btn">Reset Storyline</button>
      </div>
    </section>

    <nav class="tab-nav">
      <button class="tab-btn active" data-tab="exec-tab">Executive Summary</button>
      <button class="tab-btn" data-tab="ops-tab">Supply Chain & Operations</button>
      <button class="tab-btn" data-tab="csat-tab">Customer Satisfaction</button>
    </nav>

    <main>
      <section id="exec-tab" class="tab-panel active">
        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">Total GMV</div>
            <div class="kpi-value" id="exec-kpi-gmv">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Total Orders</div>
            <div class="kpi-value" id="exec-kpi-orders">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">AOV</div>
            <div class="kpi-value" id="exec-kpi-aov">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Latest YoY Order Growth</div>
            <div class="kpi-value" id="exec-kpi-yoy">-</div>
          </div>
        </div>
        <div class="insight-card" id="exec-insight"></div>
        <div class="chart-grid two-col">
          <div class="chart-card"><div id="exec-trend-chart"></div></div>
          <div class="chart-card"><div id="exec-payment-chart"></div></div>
        </div>
        <div class="chart-card"><div id="exec-category-chart"></div></div>
        <div class="detail-card">
          <h3>Category Drill-down by Customer State</h3>
          <p id="exec-selected-category" class="detail-subtitle">
            Click a category bar to inspect state-level detail.
          </p>
          <div id="exec-drilldown-table"></div>
        </div>
      </section>

      <section id="ops-tab" class="tab-panel">
        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">Avg Delivery Days</div>
            <div class="kpi-value" id="ops-kpi-delivery">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">On-Time Rate</div>
            <div class="kpi-value" id="ops-kpi-ontime">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Freight / GMV Ratio</div>
            <div class="kpi-value" id="ops-kpi-freight">-</div>
          </div>
        </div>
        <div class="insight-card" id="ops-insight"></div>
        <div class="chart-grid two-col">
          <div class="chart-card"><div id="ops-map-chart"></div></div>
          <div class="chart-card"><div id="ops-delay-chart"></div></div>
        </div>
        <div class="chart-card"><div id="ops-trend-chart"></div></div>
        <div class="detail-card">
          <h3>State Drill-down by Product Category</h3>
          <p id="ops-selected-state" class="detail-subtitle">
            Click a state on the bar chart or map to inspect category detail.
          </p>
          <div id="ops-drilldown-table"></div>
        </div>
      </section>

      <section id="csat-tab" class="tab-panel">
        <div class="kpi-grid">
          <div class="kpi-card">
            <div class="kpi-label">Avg Review Score</div>
            <div class="kpi-value" id="csat-kpi-score">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">One-Star Rate</div>
            <div class="kpi-value" id="csat-kpi-one-star">-</div>
          </div>
          <div class="kpi-card">
            <div class="kpi-label">Low-Score Rate (<=2)</div>
            <div class="kpi-value" id="csat-kpi-low-score">-</div>
          </div>
        </div>
        <div class="chart-grid two-col">
          <div class="chart-card"><div id="csat-review-chart"></div></div>
          <div class="chart-card"><div id="csat-delay-chart"></div></div>
        </div>
        <div class="chart-card"><div id="csat-heatmap-chart"></div></div>
        <div class="insight-card" id="csat-insight"></div>
        <div class="detail-card">
          <h3>CSAT Risk Detail (State Ã— Payment)</h3>
          <p id="csat-selected-cell" class="detail-subtitle">
            Click the heatmap to inspect selected state/payment risk detail.
          </p>
          <div id="csat-drilldown-table"></div>
        </div>
      </section>
    </main>

    <footer class="page-footer">
      <div id="last-updated">Data loaded from packaged mart outputs.</div>
    </footer>

    <script src="./app.js"></script>
  </body>
</html>
